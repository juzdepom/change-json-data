<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!-- this is how you import data -->
<script type="text/javascript" src="data.js"></script>
</head>

<p id="test">
 Open Console
</p>

<script>
$( document ).ready(function() {
  console.log(data)
  //for some reason I have to loop multiple times in order to
  loop();
  check();
  loop();
  check();
  loop();
  check();
  WriteToFile();
  function WriteToFile()
    {
      var str = JSON.stringify(data, null, 2);
      console.log(str)
     }
  function loop(){
    data.forEach(shop => {
      if(shop["Longitude"]==null){
        // console.log("THIS IS NULL!!"+shop["Name"]+shop["Longitude"])
        var newShop = {
          "Name": shop["Name"],
          "Address1": shop["Address1"],
          "Address2": null,
          "City": shop["Address2"],
          "State": shop["City"],
          "Postal": shop["State"],
          "Latitude": shop["Postal"],
          "Longitude": shop["Latitude"]
        }
        console.log(newShop)
        // console.log("NEW!!!"+newShop["Name"]+newShop["Longitude"])
        var index = data.indexOf(shop)
        data.splice(index, 1)
        data.push(newShop)
      }
    })
  }
  function check(){
    console.log('now')
    data.forEach(shop => {
      if(shop["Longitude"]==null){
        console.log("didn't work")
      }
    })
  }
});
</script>
